<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Wavecell System JS SDK Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <div class="logo">
        <img src="images/logo.png" />
      </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='wavecell.com'>Copyright Â© 2015 Wavecell</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<blockquote>
<p>Current version</p>
</blockquote>
<pre><code class="highlight plaintext">v1.1.0
</code></pre>

<p>Welcome to Wavecell Multichannel Communication System JavaScript SDK. The JavaScript Library will enable you to add voice, video and chat functionality to your webpages.</p>

<h2 id="about-the-documentation">About the documentation</h2>

<p>All method description will have examples on the right side.</p>

<p>Parameters passed to the methods are samples only. You are provided a detailed description of the parameters in each method block.</p>

<h1 id="authorization">Authorization</h1>

<blockquote>
<p>API Authorization Endpoint</p>
</blockquote>
<pre><code class="highlight plaintext">http://api.wavecell.com/access/token
</code></pre>

<p>Wavecell JS SDK requires <code class="prettyprint">access token</code> to authorize customer applications to the Multichannel Communication System.</p>

<p>To start you must have a <code class="prettyprint">client id</code> and <code class="prettyprint">client secret</code>. Wavecell will provide you this credentials.</p>

<p>Once you have your credentials, you can get an <code class="prettyprint">access token</code> using OAUTH 2.0.</p>

<p>Wavecell supports two OAUTH 2.0 flows:</p>

<ul>
<li>Client credentials</li>
<li>Authorization Code</li>
</ul>

<h1 id="wmcsengine">WMCSEngine</h1>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'access_token'</span> <span class="p">:</span> <span class="s1">'your_access_token'</span><span class="p">,</span>
  <span class="s1">'uid'</span> <span class="p">:</span> <span class="s1">'unique_user_id'</span><span class="p">,</span>
  <span class="s1">'name'</span> <span class="p">:</span> <span class="s1">'user_display_name'</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">wmcs</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WMCSEngine</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</code></pre>

<p>The JS SDK base class used to initialize the connection to the Multichannel System and perform voice and chat.</p>

<h3 id="options-parameters">Options Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td></td>
<td>Access token from the authentication server.</td>
</tr>
<tr>
<td>uid</td>
<td></td>
<td>Unique identifier for this user</td>
</tr>
<tr>
<td>name</td>
<td></td>
<td>Name to display on the call box.</td>
</tr>
<tr>
<td>debugLevel</td>
<td>0</td>
<td>0 - No debug messages, 1 - First level of debug messages, 3 - Detailed debug messages</td>
</tr>
</tbody></table>

<h2 id="initialize">initialize</h2>
<pre><code class="highlight javascript"><span class="c1">// Event emitted afer method `initialize` is executed</span>
<span class="nx">wmcs</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'initialize'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">connectionType</span><span class="p">)</span> <span class="p">{});</span>

<span class="nx">wmcs</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
</code></pre>

<p>Launches the connection between JS SDK and the Multichannel Communication System.</p>

<p>When connection has succeeded you should receive an <code class="prettyprint">initialize</code> event.<br>
The callback will receive the connection type string as the first parameter.  </p>

<p>If the browser supports Web RTC, the connection type will be <code class="prettyprint">&quot;WebRTC&quot;</code>.<br>
If the browser does not support Web RTC, the SDK will prompt you to download the RtccDriver for your specific OS platform.</p>

<p>Once the driver has started and connection is established, the connection type receive in the callback of <code class="prettyprint">initialize</code> event will be <code class="prettyprint">&quot;RtccDriver&quot;</code>.</p>

<h2 id="call">call</h2>
<pre><code class="highlight javascript"><span class="c1">// Events emitted afer method `call` is executed</span>
<span class="nx">wmcs</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'call.error'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{});</span>
<span class="nx">wmcs</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'call.active'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{});</span>

<span class="nx">wmcs</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s1">'receiver_uid'</span><span class="p">,</span> <span class="s1">'Receiver'</span><span class="p">);</span>
</code></pre>

<p>Create and initiates a 1-1 voice call.</p>

<p>Once call is active will emit <code class="prettyprint">call.active</code> event. On error will emit <code class="prettyprint">call.error</code> event with the <code class="prettyprint">error</code> given as first parameter of the callback.</p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>uid</td>
<td>The unique id of the receiving user.</td>
</tr>
<tr>
<td></td>
<td>- Min size = 6 characters</td>
</tr>
<tr>
<td></td>
<td>- Max size = 90 characters</td>
</tr>
<tr>
<td></td>
<td>- Valid characters = UTF8 - unicode - Latin basic, except: &amp; &ldquo; # \ % ?</td>
</tr>
<tr>
<td></td>
<td>- Case sensitive and no whitespace characters</td>
</tr>
<tr>
<td>name</td>
<td>The name displayed on the call box of when call is initiated.</td>
</tr>
<tr>
<td></td>
<td>- Max size = 127 characters</td>
</tr>
<tr>
<td></td>
<td>- Not null</td>
</tr>
<tr>
<td></td>
<td>- UTF-8 Characters with exemption of characters &rdquo; and &rsquo;</td>
</tr>
</tbody></table>

<h2 id="hangup">hangup</h2>
<pre><code class="highlight javascript"><span class="c1">// Event emitted when method `hangup` was successful</span>
<span class="nx">wmcs</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'call.hangup'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{});</span>

<span class="nx">wmcs</span><span class="p">.</span><span class="nx">hangup</span><span class="p">();</span>
</code></pre>

<p>Hangs-up the current call</p>

<h2 id="disconnect">disconnect</h2>
<pre><code class="highlight javascript"><span class="c1">// Event emitted when method `disconnect` is executed</span>
<span class="nx">wmcs</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'disconnected'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{});</span>

<span class="nx">wmcs</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span>
</code></pre>

<p>Disconnects the user from the Multichannel Communication System.</p>

<h2 id="status">status</h2>
<pre><code class="highlight javascript"><span class="nx">wmcs</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'user.status'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>

<span class="p">});</span>

<span class="nx">wmcs</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="s1">'receiver'</span><span class="p">);</span>

<span class="c1">// Status object</span>
<span class="p">{</span>
  <span class="na">uid</span> <span class="p">:</span> <span class="s1">'uid'</span><span class="p">,</span> <span class="c1">// uid of the user</span>
  <span class="na">value</span> <span class="p">:</span> <span class="mi">0</span> <span class="c1">// 0 - inactive, 1 - active</span>
<span class="p">}</span>
</code></pre>

<p>Checks for the status of the uid passed in the system.</p>

<p>Event <code class="prettyprint">user.status</code> is emitted with the status of the user.</p>

<p>The callback will receive the status object.</p>

<h2 id="mute">mute</h2>
<pre><code class="highlight javascript"><span class="nx">wmcs</span><span class="p">.</span><span class="nx">mute</span><span class="p">();</span>
</code></pre>

<p>Mutes your microphone. The other participant won&rsquo;t hear your audio stream.</p>

<h2 id="unmute">unmute</h2>
<pre><code class="highlight javascript"><span class="nx">wmcs</span><span class="p">.</span><span class="nx">unmute</span><span class="p">();</span>
</code></pre>

<p>Unmutes your microphone. The other participant can hear your audio stream.</p>

<h2 id="togglemute">toggleMute</h2>
<pre><code class="highlight javascript"><span class="nx">wmcs</span><span class="p">.</span><span class="nx">toggleMute</span><span class="p">();</span>
</code></pre>

<p>Toggles mute state of the current call.</p>

<h2 id="setaccesstoken">setAccessToken</h2>
<pre><code class="highlight javascript"><span class="nx">wmcs</span><span class="p">.</span><span class="nx">setAccessToken</span><span class="p">(</span><span class="s1">'sample_token'</span><span class="p">);</span>
</code></pre>

<p>Sets a new access token for the current session</p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>Access token received from WMCS server</td>
</tr>
</tbody></table>

<h2 id="setname">setName</h2>
<pre><code class="highlight javascript"><span class="nx">wmcs</span><span class="p">.</span><span class="nx">setName</span><span class="p">(</span><span class="s1">'receiver'</span><span class="p">);</span>
</code></pre>

<p>Sets the user&rsquo;s name displayed in the call box UI.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Value of name must respect naming rules:</td>
</tr>
<tr>
<td></td>
<td>- Max size = 127 characters</td>
</tr>
<tr>
<td></td>
<td>- UTF-8 Characters with exemption of characters &ldquo; and &rsquo;</td>
</tr>
<tr>
<td></td>
<td>- Case sensitive and no whitespace allowed</td>
</tr>
</tbody></table>

          <h1 id="events">Events</h1>

<p>Events emitted by the library.</p>

<table><thead>
<tr>
<th>Event</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>authorizing</td>
<td>This event fires when the engine is authorizing to the WMCS backend.</td>
</tr>
<tr>
<td>authorized</td>
<td>This event is fired once engine has been authorized.</td>
</tr>
<tr>
<td>initialize</td>
<td>This event is fired when engine has been initialized. The callback will receive the connection type: &ldquo;WebRTC&rdquo; or &ldquo;RtccDriver&rdquo;.</td>
</tr>
<tr>
<td>connected</td>
<td>This event is fired once connection to the WMCS cloud is established.</td>
</tr>
<tr>
<td>disconnected</td>
<td>This event is fired when connection to the WMCS cloud is cut-off.</td>
</tr>
<tr>
<td>error</td>
<td>This event fires once an error is encountered by the library. The callback will receive the error.</td>
</tr>
<tr>
<td>call.active</td>
<td>This event fires once the call is being performed.</td>
</tr>
<tr>
<td>call.hangup</td>
<td>This event fires once a call is terminated by either side of call.</td>
</tr>
<tr>
<td>call.error</td>
<td>This event fires once an error is encountered during the call. The callback will receive an error message.</td>
</tr>
<tr>
<td>user.status</td>
<td>This event fires once <code class="prettyprint">status</code> method is called. The callback will receive a status object.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
